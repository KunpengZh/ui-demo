(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1957da15"],{"0bfb":function(t,e,a){"use strict";var n=a("cb7c");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0c65":function(t,e,a){},1431:function(t,e,a){},"214f":function(t,e,a){"use strict";var n=a("32e9"),o=a("2aba"),i=a("79e5"),s=a("be13"),r=a("2b4c");t.exports=function(t,e,a){var c=r(t),l=a(s,c,""[t]),u=l[0],d=l[1];i(function(){var e={};return e[c]=function(){return 7},7!=""[t](e)})&&(o(String.prototype,t,u),n(RegExp.prototype,c,2==e?function(t,e){return d.call(t,this,e)}:function(t){return d.call(t,this)}))}},2608:function(t,e,a){},"28a5":function(t,e,a){a("214f")("split",2,function(t,e,n){"use strict";var o=a("aae3"),i=n,s=[].push,r="split",c="length",l="lastIndex";if("c"=="abbc"[r](/(b)*/)[1]||4!="test"[r](/(?:)/,-1)[c]||2!="ab"[r](/(?:ab)*/)[c]||4!="."[r](/(.?)(.?)/)[c]||"."[r](/()()/)[c]>1||""[r](/.?/)[c]){var u=void 0===/()??/.exec("")[1];n=function(t,e){var a=String(this);if(void 0===t&&0===e)return[];if(!o(t))return i.call(a,t,e);var n,r,d,g,f,h=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,v=void 0===e?4294967295:e>>>0,b=new RegExp(t.source,m+"g");u||(n=new RegExp("^"+b.source+"$(?!\\s)",m));while(r=b.exec(a)){if(d=r.index+r[0][c],d>p&&(h.push(a.slice(p,r.index)),!u&&r[c]>1&&r[0].replace(n,function(){for(f=1;f<arguments[c]-2;f++)void 0===arguments[f]&&(r[f]=void 0)}),r[c]>1&&r.index<a[c]&&s.apply(h,r.slice(1)),g=r[0][c],p=d,h[c]>=v))break;b[l]===r.index&&b[l]++}return p===a[c]?!g&&b.test("")||h.push(""):h.push(a.slice(p)),h[c]>v?h.slice(0,v):h}}else"0"[r](void 0,0)[c]&&(n=function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)});return[function(a,o){var i=t(this),s=void 0==a?void 0:a[e];return void 0!==s?s.call(a,i,o):n.call(String(i),a,o)},n]})},"2ca8":function(t,e,a){t.exports=a.p+"img/docSearch.f34b60dc.png"},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"456d":function(t,e,a){var n=a("4bf8"),o=a("0d58");a("5eda")("keys",function(){return function(t){return o(n(t))}})},"53ca":function(t,e,a){"use strict";function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t){return o="function"===typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},o(t)}a.d(e,"a",function(){return o})},"5cc4":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.filterTypeShow?t._e():n("img",{staticClass:"filterIcon",attrs:{src:a("2ca8"),alt:"",width:"70px",height:"70px"},on:{click:t.handleFilterSwitch}}),n("transition",{attrs:{name:"fadeDown"}},[t.filterTypeShow?n("el-card",[n("div",{staticClass:"clearfix contentAlignLeft",staticStyle:{"padding-top":"3px","padding-bottom":"3px"},attrs:{slot:"header"},slot:"header"},[n("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini",icon:"el-icon-close",type:"text"},on:{click:t.handleDocSearch}},[t._v("文档搜索")]),n("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini",icon:"el-icon-menu",type:"text"},on:{click:t.handleTagsManagement}},[t._v("标记管理")]),n("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini",icon:"el-icon-menu",type:"text"},on:{click:t.handleDocumentUpdate}},[t._v("文档录入")])],1),n("el-menu",{attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},t._l(t.navagators,function(e){return n("el-menu-item",{key:e.text,staticStyle:{height:"20px","line-height":"20px"},attrs:{index:e.text}},[t._v(t._s(e.text))])})),n("div",{staticClass:"line"}),t.showFilterTags?n("div",{staticClass:"contentAlignLeft filterTagsDiv"},t._l(t.filterTags,function(e,a){return n("el-button",{key:e,staticClass:"filterTag",attrs:{type:t.tagsType[a%5],size:"mini"},on:{click:t.handleTagSelect}},[t._v(t._s(e))])})):t._e(),n("div",{staticStyle:{"padding-left":"15px","margin-top":"10px"}},t._l(t.selectedTags,function(e){return n("el-row",{key:e.text},[n("el-col",{attrs:{span:2}},[n("div",{staticClass:"contentAlignRight filterTagLabel"},[n("el-button",{attrs:{type:"success",size:"mini",plain:""},on:{click:t.handleLogicChange}},[t._v(t._s(e.text)+"("+t._s(e.logic)+"):")])],1)]),n("el-col",{attrs:{span:21}},[n("div",{staticClass:"contentAlignLeft"},t._l(e.value,function(a,o){return n("el-tag",{key:a,staticClass:"filterTag",attrs:{size:"mini",closable:"",hit:t.tagborder,"disable-transitions":t.disableTransitions,type:t.tagsType[o%5]},on:{close:function(n){t.handleTagClose(e.text,a)}}},[t._v(t._s(a)+"\n              ")])}))])],1)}))],1):t._e()],1)],1)},o=[],i=(a("28a5"),a("f751"),a("cadf"),a("551c"),a("097d"),{props:["filterShow","criteriaTags","orinavagators"],data:function(){return{filterTypeShow:this.filterShow,tagborder:!0,disableTransitions:!0,tagsSerial:0,selectedTags:{},tagsType:["primary","success","warning","danger","info","text",""],selectedCriteria:{},activeIndex:"0",navagators:this.orinavagators,showFilterTags:!1,filterTags:[],activeCategory:""}},watch:{criteriaTags:function(t,e){this.selectedTags=Object.assign({},t)},orinavagators:function(t,e){this.navagators=t}},name:"Navagator",methods:{handleDocSearch:function(){this.$router.push("/doccenter")},handleDocumentUpdate:function(){this.$router.push("/docinput")},handleTagsManagement:function(){this.$router.push({path:"/tagsmanagement"})},distributeFilter:function(t){this.$emit(t,this.selectedTags)},handleTagClose:function(t,e){var a=Object.assign({},this.selectedTags),n=a[t],o=n.value.indexOf(e);if(o>=0){var i=n.value.slice(0,o).concat(n.value.slice(o+1));n.value=i,i.length<=0?delete a[t]:a[t]=n,this.selectedTags=a,this.distributeFilter("filterChange")}},handleLogicChange:function(t){var e=t.target.textContent;e=e.split("("),e=e[0];var a=Object.assign({},this.selectedTags);a[e].logic="And"===a[e].logic?"Or":"And",this.selectedTags=a,this.distributeFilter("filterLogicChange")},handleTagSelect:function(t){var e=t.target.textContent,a=Object.assign({},this.selectedTags);if(a[this.activeCategory]){for(var n=a[this.activeCategory].value,o=!0,i=0;i<n.length;i++)if(n[i]===e){o=!1;break}o&&(n.push(e),a[this.activeCategory].value=n,this.distributeFilter("filterChange"))}else{a[this.activeCategory]={text:this.activeCategory,logic:"Or"};var s=[];s.push(e),a[this.activeCategory]["value"]=s,this.selectedTags=a,this.distributeFilter("filterChange")}},handleFilterSwitch:function(){this.filterTypeShow=!this.filterTypeShow,this.filterTypeShow||(this.showFilterTags=!1),this.activeCategory=""},handleSelect:function(t){this.activeCategory=t;for(var e=[],a=this.navagators,n=0;n<a.length;n++)if(a[n].text===t){e=a[n].value;break}this.showFilterTags=!0,this.filterTags=e}}}),s=i,r=(a("b4a7"),a("2877")),c=Object(r["a"])(s,n,o,!1,null,null,null);c.options.__file="Navagator.vue";e["a"]=c.exports},"5eda":function(t,e,a){var n=a("5ca1"),o=a("8378"),i=a("79e5");t.exports=function(t,e){var a=(o.Object||{})[t]||Object[t],s={};s[t]=e(a),n(n.S+n.F*i(function(){a(1)}),"Object",s)}},"6b54":function(t,e,a){"use strict";a("3846");var n=a("cb7c"),o=a("0bfb"),i=a("9e1e"),s="toString",r=/./[s],c=function(t){a("2aba")(RegExp.prototype,s,t,!0)};a("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?c(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?o.call(t):void 0)}):r.name!=s&&c(function(){return r.call(this)})},7333:function(t,e,a){"use strict";var n=a("0d58"),o=a("2621"),i=a("52a7"),s=a("4bf8"),r=a("626a"),c=Object.assign;t.exports=!c||a("79e5")(function(){var t={},e={},a=Symbol(),n="abcdefghijklmnopqrst";return t[a]=7,n.split("").forEach(function(t){e[t]=t}),7!=c({},t)[a]||Object.keys(c({},e)).join("")!=n})?function(t,e){var a=s(t),c=arguments.length,l=1,u=o.f,d=i.f;while(c>l){var g,f=r(arguments[l++]),h=u?n(f).concat(u(f)):n(f),m=h.length,p=0;while(m>p)d.call(f,g=h[p++])&&(a[g]=f[g])}return a}:c},"746f":function(t,e,a){"use strict";var n=a("2608"),o=a.n(n);o.a},"7e79":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elementContainer"},[a("div",{staticClass:"docSearchContainer"},[a("Navagator",{attrs:{orinavagators:t.orinavagators,criteriaTags:t.criteriaTags,filterShow:!0},on:{filterChange:t.handleFilterChange,filterLogicChange:t.filterLogicChange}}),t.showDocSearch?a("el-card",{staticStyle:{"margin-top":"20px","padding-top":"10px"}},[a("DocumentTable",{attrs:{tableData:t.tableData,tableHeight:t.tableHeight},on:{documentUpdate:t.handleDocumentUpdate}})],1):a("DocumentUpdate",{attrs:{document:t.document,updatedTags:t.updatedTags}})],1)])},o=[],i=(a("cadf"),a("551c"),a("097d"),a("5cc4")),s=a("fbe6"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticStyle:{"margin-top":"20px","padding-top":"10px"}},[a("div",{staticClass:"clearfix contentAlignRight",staticStyle:{"padding-left":"60px"},attrs:{slot:"header"},slot:"header"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check",size:"mini"},on:{click:t.confirmDocumentUpdate}},[t._v("Update")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check",size:"mini"},on:{click:t.confirmDocumentDelete}},[t._v("Delete")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-remove",size:"mini"}},[t._v("Cancel")])],1)],1),a("el-form",{ref:"docform",attrs:{model:t.documentFormModel,"label-width":"150px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"URL(*):"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:t.documentFormModel.url,callback:function(e){t.$set(t.documentFormModel,"url",e)},expression:"documentFormModel.url"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Document Name(*):"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:t.documentFormModel.docName,callback:function(e){t.$set(t.documentFormModel,"docName",e)},expression:"documentFormModel.docName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Document Author(*):"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:t.documentFormModel.author,callback:function(e){t.$set(t.documentFormModel,"author",e)},expression:"documentFormModel.author"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Document Date(*):"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"document date"},model:{value:t.documentFormModel.date,callback:function(e){t.$set(t.documentFormModel,"date",e)},expression:"documentFormModel.date"}})],1)],1)],1)],1)],1)],1)},c=[],l=(a("6b54"),a("a481"),a("ac6a"),a("456d"),a("53ca")),u=(a("f751"),a("2b0e")),d=a("8c4f");u["default"].use(d["a"]);var g={props:["document","updatedTags"],data:function(){return{orinavagators:[],tableHeight:"300px",documentFormModel:this.document,selectedTags:this.updatedTags}},watch:{updatedTags:function(t,e){console.log("update tags"),this.selectedTags=Object.assign({},t)}},name:"DocumentUpdate",components:{Navagator:i["a"]},methods:{showLoading:function(){this.loading=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},closeLoading:function(){this.loading.close()},confirmDocumentDelete:function(){for(var t=this,e=this,a=this.documentFormModel,n=Object.assign({},this.$store.state.doc),o=0;o<n.data.documentList.length;o++)if(n.data.documentList[o].GUID===a.GUID){n.data.documentList=n.data.documentList.slice(0,o).concat(n.data.documentList.slice(o+1));break}this.showLoading(),this.$http.post("/document/updatedocumentconfig",JSON.stringify(n)).then(function(a){a=a.body,a&&a[0]&&a[0]._id?(e.$store.state.doc=a[0],e.orinavagators=t.$store.state.doc.data.navagators,e.$store.state.docloaded=!0,e.$message.success("Save document successed!!")):a[0]?e.$message.error(a[0].errormsg):a.message&&e.$message.error(a.message),e.closeLoading()},function(t){e.closeLoading(),console.log(t),e.$message.error(t.body.message)})},confirmDocumentUpdate:function(){var t=this;if(!this.validateForCreateNew())return!1;var e=this.documentFormModel;if(e.tags=this.copyTagsToNewObj(),"object"===Object(l["a"])(e.date)){var a=e.date,n=a.getMonth()+1,o=a.getDate();a=a.getFullYear()+"-"+(n<10?"0"+n:n)+"-"+(o<10?"0"+o:o),e.date=a}for(var i=this,s=Object.assign({},this.$store.state.doc),r=0;r<s.data.documentList.length;r++)if(s.data.documentList[r].GUID===e.GUID){s.data.documentList[r]=e;break}this.showLoading(),this.$http.post("/document/updatedocumentconfig",JSON.stringify(s)).then(function(e){e=e.body,e&&e[0]&&e[0]._id?(i.$store.state.doc=e[0],i.orinavagators=t.$store.state.doc.data.navagators,i.$store.state.docloaded=!0,i.$message.success("Save document successed!!")):e[0]?i.$message.error(e[0].errormsg):e.message&&i.$message.error(e.message),i.closeLoading()},function(t){i.closeLoading(),console.log(t),i.$message.error(t.body.message)})},validateForCreateNew:function(){return!(""===this.documentFormModel.url||""===this.documentFormModel.docName||!Object.keys(this.selectedTags).length||""===this.documentFormModel.author)||(this.$message.error("Document URL, Name, Author and Tags can not be null, please double check"),!1)},copyTagsToNewObj:function(t){t=void 0==t?this.selectedTags:t;var e={};for(var a in t){e[a]={},e[a].text=t[a].text;for(var n=t[a].value.length,o=[],i=0;i<n;i++)o.push(t[a].value[i]);e[a].value=o}return e},generalGuID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,a="x"==t?e:3&e|8;return a.toString(16)})},handleFilterChange:function(t){this.selectedTags=t}},beforeRouteLeave:function(t,e,a){this.newdocuments.length>0?this.$confirm("You have new documents created but not submitted yet, if you leave this page, all of your new data will be lost for ever","Would you like to continue and unsave you data? ",{confirmButtonText:"Cancel",cancelButtonText:"Confirm (Lost all new data)",type:"warning"}).then(function(){a(!1)}).catch(function(){a()}):a()}},f=g,h=(a("746f"),a("2877")),m=Object(h["a"])(f,r,c,!1,null,null,null);m.options.__file="DocumentUpdate.vue";var p=m.exports,v={data:function(){return{showDocSearch:!0,orinavagators:[],tableHeight:"500px",tableData:[],selectedTags:{},document:{GUID:"",url:"",docName:"",author:"",date:new Date,tags:{}},criteriaTags:null,updatedTags:null}},name:"DocumentSearch",components:{Navagator:i["a"],DocumentTable:s["a"],DocumentUpdate:p},methods:{handleDocumentUpdate:function(t){this.document=t,this.criteriaTags=this.copyTagsToNewObj(t.tags),this.updatedTags=this.criteriaTags,this.showDocSearch=!1},copyTagsToNewObj:function(t){t=void 0==t?this.selectedTags:t;var e={};for(var a in t){e[a]={},e[a].text=t[a].text;for(var n=t[a].value.length,o=[],i=0;i<n;i++)o.push(t[a].value[i]);e[a].value=o}return e},handleFilterChange:function(t){this.selectedTags=t,this.updatedTags=this.selectedTags,this.showDocSearch&&this.filterDocuments()},filterDocuments:function(){var t=this.selectedTags,e=this.$store.state.doc.data.documentList.filter(function(e){for(var a in t){if(!e.tags.hasOwnProperty(a))return!1;var n=t[a].logic,o=t[a].value,i=e.tags[a].value,s=o.length;if("Or"===n){for(var r=!1,c=0;c<s;c++)if(i.indexOf(o[c])>=0){r=!0;break}if(!r)return!1}else for(var l=0;l<s;l++)if(i.indexOf(o[l])<0)return!1}return!0});this.tableData=e},filterLogicChange:function(t){this.selectedTags=t,this.filterDocuments()},showLoading:function(){this.loading=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},closeLoading:function(){this.loading.close()}},beforeMount:function(){this.orinavagators=this.$store.state.doc.data.navagators,this.tableData=this.$store.state.doc.data.documentList}},b=v,y=(a("84bc"),Object(h["a"])(b,n,o,!1,null,"6f388534",null));y.options.__file="DocCenter.vue";e["default"]=y.exports},"84bc":function(t,e,a){"use strict";var n=a("ff9d"),o=a.n(n);o.a},a481:function(t,e,a){a("214f")("replace",2,function(t,e,a){return[function(n,o){"use strict";var i=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,i,o):a.call(String(i),n,o)},a]})},aae3:function(t,e,a){var n=a("d3f4"),o=a("2d95"),i=a("2b4c")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},b4a7:function(t,e,a){"use strict";var n=a("0c65"),o=a.n(n);o.a},c8cf:function(t,e,a){"use strict";var n=a("1431"),o=a.n(n);o.a},f751:function(t,e,a){var n=a("5ca1");n(n.S+n.F,"Object",{assign:a("7333")})},fbe6:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",height:t.tableHeight,"row-style":t.rowStyle},on:{"row-dblclick":t.handleDbClick}},[a("el-table-column",{attrs:{prop:"author",label:"Author",width:"180"}}),a("el-table-column",{attrs:{prop:"date",label:"Date",width:"180"}}),a("el-table-column",{attrs:{label:"Document Name",width:"480"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticStyle:{color:"#606266"},attrs:{href:e.row.url}},[t._v(t._s(e.row.docName))])]}}])}),a("el-table-column",{attrs:{label:"Document Tags"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.tags,function(e,n){return a("span",{key:n},t._l(e.value,function(e,n){return a("el-tag",{key:e,staticClass:"filterTag",attrs:{size:"mini",hit:!0,"disable-transitions":!0,type:t.tagsType[n]}},[t._v(t._s(e)+"\n      ")])}))})}}])})],1)},o=[],i=(a("cadf"),a("551c"),a("097d"),{name:"DocumentTable",props:["tableData","tableHeight"],data:function(){return{tagsType:["primary","success","warning","danger","info","text",""],rowStyle:{textAlign:"left"}}},methods:{handleDbClick:function(t){this.$emit("documentUpdate",t)}}}),s=i,r=(a("c8cf"),a("2877")),c=Object(r["a"])(s,n,o,!1,null,null,null);c.options.__file="DocumentTable.vue";e["a"]=c.exports},ff9d:function(t,e,a){}}]);
//# sourceMappingURL=chunk-1957da15.d30a9591.js.map